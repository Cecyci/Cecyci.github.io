<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  <meta name="keywords" content="前端 Python 机器学习">
  
  
  <meta name="description" content="2021.12.28建的博客 看看我能坚持多久">
  
  <title>
    JAVA基础 |
    
    Cecyci
  </title>
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <main class="content">
    <section class="outer">
  <article id="post-java基础" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      

<h1 class="article-title" itemprop="name">
  JAVA基础
</h1>



    </header>
    

    
    <div class="article-meta">
      <a href="/2020/12/19/java%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2020-12-19T14:19:00.000Z" itemprop="datePublished">2020-12-19</time>
</a>
      
    </div>
    

    
    
<div class="tocbot"></div>

    

    <div class="article-entry" itemprop="articleBody">
      
      
      
      <p> 一些JAVA基础知识</p>
<span id="more"></span>

<h1 id="1、数组"><a href="#1、数组" class="headerlink" title="1、数组"></a>1、数组</h1><h2 id="1-1-创建与初始化"><a href="#1-1-创建与初始化" class="headerlink" title="1.1 创建与初始化"></a>1.1 创建与初始化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">55</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> b[] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<h2 id="1-2-复制数组"><a href="#1-2-复制数组" class="headerlink" title="1.2 复制数组"></a>1.2 复制数组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.arraycopy(a, <span class="number">0</span>, b, <span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 从a数组的0下标复制1个到b数组的1下标</span></span><br></pre></td></tr></table></figure>
<h2 id="1-3-二维数组"><a href="#1-3-二维数组" class="headerlink" title="1.3 二维数组"></a>1.3 二维数组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErWeiShuZu</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> [][] x = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>][];</span><br><span class="line">		x[<span class="number">0</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">		System.out.println(x[<span class="number">0</span>][<span class="number">1</span>]); <span class="comment">// 0</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-4-数组作为方法参数"><a href="#1-4-数组作为方法参数" class="headerlink" title="1.4 数组作为方法参数"></a>1.4 数组作为方法参数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayUse</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> a[])</span> </span>&#123;</span><br><span class="line">		a[<span class="number">0</span>] = <span class="number">5</span>;</span><br><span class="line">		<span class="comment">// 转换为string</span></span><br><span class="line">		System.out.println(Arrays.toString(a)); </span><br><span class="line">		<span class="comment">// 复制一定区域</span></span><br><span class="line">		System.out.println(Arrays.toString(Arrays.copyOfRange(a, <span class="number">0</span>, <span class="number">3</span>)));</span><br><span class="line">		<span class="comment">// 排序</span></span><br><span class="line">		Arrays.sort(a);</span><br><span class="line">		System.out.println(Arrays.toString(a));</span><br><span class="line">		<span class="comment">// 搜索(先进行sort)</span></span><br><span class="line">		System.out.println(Arrays.binarySearch(a, <span class="number">8</span>));</span><br><span class="line">		<span class="comment">// 相同</span></span><br><span class="line">		<span class="keyword">int</span> []b = Arrays.copyOfRange(a, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">        System.out.println(Arrays.equals(a, b)); <span class="comment">// true</span></span><br><span class="line">		b[<span class="number">2</span>] = <span class="number">555</span>;</span><br><span class="line">		System.out.println(Arrays.equals(a, b)); <span class="comment">// false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主函数调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a2 = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">55</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="keyword">new</span> ArrayUse().method(a2);</span><br><span class="line"><span class="keyword">new</span> ShuZu().outputArr(a2); <span class="comment">// 输出，a2作为方法参数，已被改变</span></span><br></pre></td></tr></table></figure>
<h2 id="1-5-排序"><a href="#1-5-排序" class="headerlink" title="1.5 排序"></a>1.5 排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortFun</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[];</span><br><span class="line">	<span class="keyword">int</span> arrsize = <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">inputArr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		<span class="keyword">int</span> num = sc.nextInt(); <span class="comment">// 数量</span></span><br><span class="line">		arr = <span class="keyword">new</span> <span class="keyword">int</span>[num];</span><br><span class="line">		arrsize = num;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">			arr[i] = sc.nextInt();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">selectSort</span><span class="params">()</span> </span>&#123; <span class="comment">// 选择排序</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrsize; i++) &#123;</span><br><span class="line">			<span class="comment">// 比较后续是否有比arr[i]小的</span></span><br><span class="line">			<span class="comment">// 有则交换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; arrsize; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (arr[i] &gt; arr[j]) &#123;</span><br><span class="line">					<span class="keyword">int</span> temp = arr[i];</span><br><span class="line">					arr[i] = arr[j];</span><br><span class="line">					arr[j] = temp;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arrsize - <span class="number">1</span>; i++) &#123; <span class="comment">// arrsize - 1次冒泡泡</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arrsize - i - <span class="number">1</span>; j++) &#123; <span class="comment">// arrsize - i - 1次交换</span></span><br><span class="line">				<span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">					<span class="keyword">int</span> temp = arr[j];</span><br><span class="line">					arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">					arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">outputArr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> arri : arr) &#123; <span class="comment">// 增强型for循环</span></span><br><span class="line">			System.out.print(arri);</span><br><span class="line">			System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SortFun sf = <span class="keyword">new</span> SortFun();</span><br><span class="line">		sf.inputArr();</span><br><span class="line"><span class="comment">//		sf.selectSort();</span></span><br><span class="line">		sf.bubbleSort();</span><br><span class="line">		sf.outputArr();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2、类与对象"><a href="#2、类与对象" class="headerlink" title="2、类与对象"></a>2、类与对象</h1><h2 id="2-1-命名规范"><a href="#2-1-命名规范" class="headerlink" title="2.1  命名规范"></a>2.1  命名规范</h2><ol>
<li>类的第一个字母大写；</li>
<li>方法addSpeed().</li>
<li>属性一般小写.<h2 id="2-2-引用"><a href="#2-2-引用" class="headerlink" title="2.2 引用"></a>2.2 引用</h2><h3 id="引用与指向"><a href="#引用与指向" class="headerlink" title="引用与指向"></a>引用与指向</h3>new一个对象仅仅代表新建一个对象，没有办法访问它；而使用=给引用赋对象值，代表该对象，又叫“指向”；<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用一个引用来指向这个对象</span></span><br><span class="line">Lei h1 = <span class="keyword">new</span> Lei();</span><br></pre></td></tr></table></figure>
<h3 id="多个引用，一个对象"><a href="#多个引用，一个对象" class="headerlink" title="多个引用，一个对象"></a>多个引用，一个对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用一个引用来指向这个对象</span></span><br><span class="line">Lei h1 = <span class="keyword">new</span> Lei();</span><br><span class="line">System.out.println(h1.name);</span><br><span class="line">h1.name = <span class="string">&quot;Cct&quot;</span>;</span><br><span class="line">Lei h2 = h1;  <span class="comment">//h2指向h1所指向的对象</span></span><br><span class="line">Lei h3 = h1;</span><br><span class="line">Lei h4 = h1;</span><br><span class="line">Lei h5 = h4;</span><br><span class="line">System.out.println(h5.name);</span><br><span class="line">h4.name = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">System.out.println(h1.name);</span><br><span class="line"><span class="comment">//h1,h2,h3,h4,h5 五个引用，都指向同一个对象</span></span><br></pre></td></tr></table></figure>
<h3 id="一个引用，多个对象"><a href="#一个引用，多个对象" class="headerlink" title="一个引用，多个对象"></a>一个引用，多个对象</h3>当某个对象没有任何引用指向，就会被垃圾回收。</li>
</ol>
<h2 id="2-3-this的指向"><a href="#2-3-this的指向" class="headerlink" title="2.3 this的指向"></a>2.3 this的指向</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	String name; <span class="comment">//姓名</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">float</span> hp; <span class="comment">//血量</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">float</span> armor; <span class="comment">//护甲</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> moveSpeed; <span class="comment">//移动速度</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//参数名和属性名一样</span></span><br><span class="line">	<span class="comment">//在方法体中，只能访问到参数name</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName1</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		System.out.printf(<span class="string">&quot;方法参数与属性名称相同时：%s\n&quot;</span>,name);</span><br><span class="line">		name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//为了避免setName1中的问题，参数名不得不使用其他变量名</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName2</span><span class="params">(String heroName)</span></span>&#123;</span><br><span class="line">		name = heroName;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//通过this访问属性</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName3</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="comment">//name代表的是参数name</span></span><br><span class="line">		<span class="comment">//this.name代表的是属性name</span></span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Hero  h =<span class="keyword">new</span> Hero();</span><br><span class="line">		Hero  h2 =<span class="keyword">new</span> Hero();</span><br><span class="line">		h.setName1(<span class="string">&quot;teemo&quot;</span>);</span><br><span class="line">		System.out.println(h.name); <span class="comment">// null</span></span><br><span class="line">		</span><br><span class="line">		h.setName2(<span class="string">&quot;garen&quot;</span>);</span><br><span class="line">		System.out.println(h.name);	<span class="comment">// garen	</span></span><br><span class="line"></span><br><span class="line">		System.out.println(h2.name);	</span><br><span class="line">		h2.setName3(<span class="string">&quot;死歌&quot;</span>);</span><br><span class="line">		System.out.println(h2.name);</span><br><span class="line">        <span class="comment">// 死歌</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-函数对象参数改变不影响实参"><a href="#2-4-函数对象参数改变不影响实参" class="headerlink" title="2.4 函数对象参数改变不影响实参"></a>2.4 函数对象参数改变不影响实参</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero2</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    String name; <span class="comment">//姓名</span></span><br><span class="line">       </span><br><span class="line">    <span class="keyword">float</span> hp; <span class="comment">//血量</span></span><br><span class="line">       </span><br><span class="line">    <span class="keyword">float</span> armor; <span class="comment">//护甲</span></span><br><span class="line">       </span><br><span class="line">    <span class="keyword">int</span> moveSpeed; <span class="comment">//移动速度</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hero2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hero2</span><span class="params">(String name,<span class="keyword">float</span> hp)</span></span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.hp = hp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//复活</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">revive</span><span class="params">(Hero2 h)</span></span>&#123;</span><br><span class="line">    	h = <span class="keyword">new</span> Hero2(<span class="string">&quot;提莫&quot;</span>,<span class="number">383</span>); <span class="comment">// 指向新的引用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Hero2 teemo =  <span class="keyword">new</span> Hero2(<span class="string">&quot;提莫&quot;</span>,<span class="number">383</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//受到400伤害，挂了</span></span><br><span class="line">        teemo.hp = teemo.hp - <span class="number">400</span>;</span><br><span class="line">        </span><br><span class="line">        teemo.revive(teemo);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//问题： System.out.println(teemo.hp); 输出多少？ 怎么理解</span></span><br><span class="line">        <span class="comment">//  -17</span></span><br><span class="line">        System.out.println(teemo.hp);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-5-对象属性初始化顺序"><a href="#2-5-对象属性初始化顺序" class="headerlink" title="2.5 对象属性初始化顺序"></a>2.5 对象属性初始化顺序</h2><p>声明函数初始化 -&gt; 初始化块 -&gt; 构造函数初始化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero3</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String name = <span class="string">&quot;hero1&quot;</span>; <span class="comment">// 声明函数初始化</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Hero3</span><span class="params">()</span> </span>&#123; <span class="comment">// 构造函数初始化(最终结果)</span></span><br><span class="line">		name = <span class="string">&quot;hero2&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		name = <span class="string">&quot;hero3&quot;</span>; <span class="comment">// 初始化块</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(name); <span class="comment">// hero2</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-6-枚举类"><a href="#2-6-枚举类" class="headerlink" title="2.6 枚举类"></a>2.6 枚举类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnumLei</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">HeroType</span> </span>&#123;</span><br><span class="line">		TANK, WIZARD, ASSASSIN, ASSIST, WARRIOR, RANGED, PUSH, FRAMING</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (HeroType h: HeroType.values()) &#123;</span><br><span class="line">			System.out.println(h);</span><br><span class="line">		&#125;</span><br><span class="line">		HeroType h = HeroType.RANGED;</span><br><span class="line">		<span class="keyword">switch</span>(h) &#123;</span><br><span class="line">		<span class="keyword">case</span> TANK:</span><br><span class="line">			System.out.println(<span class="string">&quot;坦克&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> WIZARD:</span><br><span class="line">			System.out.println(<span class="string">&quot;法师&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> ASSASSIN:</span><br><span class="line">			System.out.println(<span class="string">&quot;辅助&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			System.out.println(<span class="string">&quot;okkkk&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-7-单例模式"><a href="#2-7-单例模式" class="headerlink" title="2.7 单例模式"></a>2.7 单例模式</h2><h3 id="饿汉式单例模式"><a href="#饿汉式单例模式" class="headerlink" title="饿汉式单例模式"></a>饿汉式单例模式</h3><p><strong>立即加载</strong></p>
<ol>
<li>将构造函数私有化，使在外部不能通过new新建一个对象，只能使用公有的getInstance方法；</li>
<li>一个实例化对象作为类属性（static）；</li>
<li>每次获取都得到同一个实例对象，即该类属性。<h3 id="懒汉式单例模式"><a href="#懒汉式单例模式" class="headerlink" title="懒汉式单例模式"></a>懒汉式单例模式</h3></li>
</ol>
<p><strong>延时加载</strong><br>与上面不同的是，类属性先不指向一个对象，而是在getInstance()中判断该引用是否为null，若是再new一个，否则直接返回。</p>
<h1 id="3、接口与继承"><a href="#3、接口与继承" class="headerlink" title="3、接口与继承"></a>3、接口与继承</h1><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> animalUML;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Pet</span> </span>&#123;</span><br><span class="line">	<span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> animalUML;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">int</span> legs;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">		legs = a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;用&quot;</span>+legs+<span class="string">&quot;只脚走路&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> animalUML;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AllAnimals</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Animal spider = <span class="keyword">new</span> Spider();</span><br><span class="line">		spider.eat(); <span class="comment">// 调用在子类中定义的抽象方法</span></span><br><span class="line">		spider.walk(); <span class="comment">// 抽象类自带方法</span></span><br><span class="line">		</span><br><span class="line">		Cat cat = <span class="keyword">new</span> Cat(<span class="string">&quot;mimi&quot;</span>);</span><br><span class="line">		cat.eat();</span><br><span class="line">		cat.walk(); <span class="comment">// 抽象类方法</span></span><br><span class="line">		cat.setName(<span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">		cat.play(); <span class="comment">// 接口方法</span></span><br><span class="line">		</span><br><span class="line">		Fish fish = <span class="keyword">new</span> Fish(<span class="string">&quot;yuyu&quot;</span>);</span><br><span class="line">		fish.walk(); <span class="comment">// 子类定义的抽象方法覆盖了父类</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// System.out.println(cat.name); 不可访问的私有属性</span></span><br><span class="line">		System.out.println(fish.name);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// Animal a = new Animal(0); animal是抽象类 不可直接实例化	</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Spider</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">	Spider() &#123;</span><br><span class="line">		<span class="keyword">super</span>(<span class="number">8</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;蜘蛛吃人！！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Pet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	Cat(String name) &#123;</span><br><span class="line">		<span class="keyword">super</span>(<span class="number">4</span>);</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	Cat() &#123;</span><br><span class="line">		<span class="keyword">super</span>(<span class="number">4</span>);</span><br><span class="line">		<span class="keyword">this</span>.name = <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 接口方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;小猫咪&quot;</span>+<span class="keyword">this</span>.name+<span class="string">&quot;在玩！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 抽象方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;小猫咪&quot;</span>+<span class="keyword">this</span>.name+<span class="string">&quot;在吃！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Pet</span> </span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">	Fish(String name) &#123;</span><br><span class="line">		<span class="keyword">super</span>(<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	Fish () &#123;</span><br><span class="line">		<span class="keyword">super</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;小鱼&quot;</span>+<span class="keyword">this</span>.name+<span class="string">&quot;在玩！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;小鱼&quot;</span>+<span class="keyword">this</span>.name+<span class="string">&quot;在吃！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;小鱼&quot;</span>+<span class="keyword">this</span>.name+<span class="string">&quot;游啊游&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4、多态"><a href="#4、多态" class="headerlink" title="4、多态"></a>4、多态</h1><h2 id="接口-1"><a href="#接口-1" class="headerlink" title="接口"></a>接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> DuoTai;</span><br><span class="line"><span class="comment">// 接口只能包含方法名</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MortalInterface</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">die</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * 英雄类</span><br><span class="line"> */</span><br><span class="line">package DuoTai;</span><br><span class="line"></span><br><span class="line">public class Hero implements Comparable&lt;Hero&gt;&#123;</span><br><span class="line">	static String copyright;</span><br><span class="line">	static &#123;</span><br><span class="line">		System.out.println(&quot;初始化copyright&quot;);</span><br><span class="line">		copyright = &quot;cct&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	synchronized static public void test () &#123;</span><br><span class="line">		for (int i =0; i &lt; 20; i++) &#123;</span><br><span class="line">			System.out.print(i + &quot; &quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">	&#125;</span><br><span class="line">	String name;</span><br><span class="line">	public int hp;</span><br><span class="line">	String type;</span><br><span class="line">	public int damage;</span><br><span class="line">	// 构造方法</span><br><span class="line">	public Hero () &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	public Hero (String name, int hp, String type) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.hp = hp;</span><br><span class="line">		this.type = type;</span><br><span class="line">	&#125;</span><br><span class="line">	public Hero (String name, int hp, int damage) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.hp = hp;</span><br><span class="line">		this.damage = damage;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">	void kill(MortalInterface m) &#123;</span><br><span class="line">		m.die();</span><br><span class="line">	&#125;</span><br><span class="line">	static void battlewin( ) &#123;</span><br><span class="line">		System.out.println(&quot;hero wins!!!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Hero:[name: &quot; + this.name + &quot;, hp: &quot; + this.hp + &quot;, damage: &quot; + this.damage + &quot;]&quot; ;</span><br><span class="line">	&#125;</span><br><span class="line">	// 重写比较函数</span><br><span class="line">	// 按伤害从高到低</span><br><span class="line">	@Override</span><br><span class="line">	public int compareTo(Hero o) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		if (damage &lt; o.damage) return 1; // &gt; 0 伤害小的排后面去 新来的的排前面去</span><br><span class="line">		return -1;</span><br><span class="line">	&#125;</span><br><span class="line">	// 判断血量是否为0</span><br><span class="line">	public boolean isDead() &#123;</span><br><span class="line">		return hp &lt;= 0 ? true:false;</span><br><span class="line">	&#125;</span><br><span class="line">	// 攻击另一个英雄</span><br><span class="line">	public void attackHero(Hero h) &#123;</span><br><span class="line">		/*try &#123;</span><br><span class="line">			Thread.sleep(1000);</span><br><span class="line">		&#125; catch (InterruptedException e) &#123;</span><br><span class="line">			// 中断异常</span><br><span class="line">			// sleep过程中被停止</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		/*if (this.isDead()) &#123;</span><br><span class="line">			System.out.println(name + &quot;挂了！&quot;);</span><br><span class="line">			return;</span><br><span class="line">		&#125;*/</span><br><span class="line">		h.hp -= damage;</span><br><span class="line">		System.out.format(&quot;%s正在攻击%s,%s的血量变成%d%n&quot;, name, h.name, h.name, h.hp);</span><br><span class="line">		if (h.isDead()) &#123;</span><br><span class="line">			System.out.println(h.name + &quot;挂了！&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// 掉血</span><br><span class="line">	synchronized public void hurt() &#123;</span><br><span class="line">		hp -= 1;</span><br><span class="line">		System.out.println(&quot;当前血量&quot; +hp);</span><br><span class="line">	&#125;</span><br><span class="line">	// 回血</span><br><span class="line">	synchronized public void recover() &#123;</span><br><span class="line">		hp += 1;</span><br><span class="line">		System.out.println(&quot;当前血量&quot; +hp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ADHero extends Hero implements MortalInterface&#123;</span><br><span class="line">	ADHero(String name, int hp) &#123;</span><br><span class="line">		super(name, hp, &quot;ADHero&quot;);</span><br><span class="line">		// 若没有上面的super，则默认调用父类的无参构造函数</span><br><span class="line">		// TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line">	ADHero()&#123;</span><br><span class="line">		super(&quot;nothing&quot;, 0, &quot;ADHero&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void die() &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		System.out.println(this.type + &quot; die!ad die hh&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	// 重写类方法</span><br><span class="line">	static void battlewin() &#123;</span><br><span class="line">		System.out.println(&quot;adhero wins!!!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class APHero extends Hero implements MortalInterface&#123;</span><br><span class="line">	APHero(String name, int hp) &#123;</span><br><span class="line">		super(name, hp, &quot;APHero&quot;);</span><br><span class="line">		// TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void die() &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		System.out.println(this.type + &quot; die!ap die hh&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ADAPHero extends Hero implements MortalInterface&#123;</span><br><span class="line">	ADAPHero(String name, int hp) &#123;</span><br><span class="line">		super(name, hp, &quot;ADAPHero&quot;);</span><br><span class="line">		// TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void die() &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		System.out.println(this.type + &quot; die!adap die hh&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="主函数"><a href="#主函数" class="headerlink" title="主函数"></a>主函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> DuoTai;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DuoTai</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Hero h = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>, <span class="number">1000</span>, <span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		ADHero ad = <span class="keyword">new</span> ADHero(<span class="string">&quot;ad&quot;</span>, <span class="number">100</span>);</span><br><span class="line">		APHero ap = <span class="keyword">new</span> APHero(<span class="string">&quot;ap&quot;</span>, <span class="number">100</span>);</span><br><span class="line">		ADAPHero adap = <span class="keyword">new</span> ADAPHero(<span class="string">&quot;adap&quot;</span>, <span class="number">100</span>);</span><br><span class="line">		h.kill(ad); <span class="comment">// kill是hero统一方法，kill方法中根据不同对象调用实现的不同的接口方法die()</span></span><br><span class="line">		h.kill(ap);</span><br><span class="line">		h.kill(adap);</span><br><span class="line">		Hero.battlewin();</span><br><span class="line">		</span><br><span class="line">		Hero h2 = <span class="keyword">new</span> ADHero(<span class="string">&quot;ad2&quot;</span>, <span class="number">100</span>);</span><br><span class="line">		h2.battlewin(); <span class="comment">// 结果是hero类的静态方法</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// Object方法</span></span><br><span class="line">		Hero h11 = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>,<span class="number">1000</span>,<span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		Hero h22 = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>,<span class="number">1000</span>,<span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		Hero h33 = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>,<span class="number">1000</span>,<span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		h33 = h11;</span><br><span class="line">		System.out.println(h11 == h22); <span class="comment">// false</span></span><br><span class="line">		System.out.println(h11.equals(h22)); <span class="comment">// false</span></span><br><span class="line">		System.out.println(h11.equals(h33)); <span class="comment">// true</span></span><br><span class="line">		</span><br><span class="line">		System.out.println(h11.toString());</span><br><span class="line">		System.out.print(h11.getClass());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="5、文件输入输出流"><a href="#5、文件输入输出流" class="headerlink" title="5、文件输入输出流"></a>5、文件输入输出流</h1><h2 id="5-1-一些文件函数"><a href="#5-1-一些文件函数" class="headerlink" title="5.1 一些文件函数"></a>5.1 一些文件函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">File f = <span class="keyword">new</span> File(<span class="string">&quot;src&quot;</span>);</span><br><span class="line">System.out.println(f.getAbsolutePath());</span><br><span class="line">System.out.println(f.exists());</span><br><span class="line">File[] fs = f.listFiles();</span><br></pre></td></tr></table></figure>
<h2 id="5-2-获取文件列表"><a href="#5-2-获取文件列表" class="headerlink" title="5.2 获取文件列表"></a>5.2 获取文件列表</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">getFiles</span><span class="params">(File[] fs)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (File f:fs) &#123;</span><br><span class="line">	<span class="keyword">if</span> (f.isDirectory()) &#123;</span><br><span class="line">		File[] next_fs = f.listFiles();</span><br><span class="line">		getFiles(next_fs);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(f.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-字节流读取文件"><a href="#5-2-字节流读取文件" class="headerlink" title="5.2 字节流读取文件"></a>5.2 字节流读取文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">readFile</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		FileInputStream fis = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">		<span class="keyword">byte</span>[] all = <span class="keyword">new</span> <span class="keyword">byte</span>[(<span class="keyword">int</span>) f.length()];</span><br><span class="line">		fis.read(all);<span class="comment">// 字节流形式读出</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">byte</span> b:all) &#123;</span><br><span class="line">			System.out.print((<span class="keyword">char</span>)b);</span><br><span class="line">		&#125;</span><br><span class="line">		fis.close();</span><br><span class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-3-字节流写入文件"><a href="#5-3-字节流写入文件" class="headerlink" title="5.3 字节流写入文件"></a>5.3 字节流写入文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">writeFile</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line">		<span class="keyword">byte</span> data[] = &#123;<span class="number">96</span>,<span class="number">97</span>&#125;;</span><br><span class="line">		fos.write(data);</span><br><span class="line">		fos.close();</span><br><span class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-字符流读取文件"><a href="#5-4-字符流读取文件" class="headerlink" title="5.4 字符流读取文件"></a>5.4 字符流读取文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">readFile2</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		FileReader fr = <span class="keyword">new</span> FileReader(f);</span><br><span class="line">		<span class="keyword">char</span>[] all = <span class="keyword">new</span> <span class="keyword">char</span>[(<span class="keyword">int</span>)f.length()];</span><br><span class="line">		fr.read(all);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">char</span> b: all) &#123;</span><br><span class="line">			System.out.print(b);</span><br><span class="line">		&#125;</span><br><span class="line">		fr.close();</span><br><span class="line">	&#125; <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-5-字符流写入文件"><a href="#5-5-字符流写入文件" class="headerlink" title="5.5 字符流写入文件"></a>5.5 字符流写入文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">writeFile2</span><span class="params">(File f)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		FileWriter fw = <span class="keyword">new</span> FileWriter(f);</span><br><span class="line">		String data = <span class="string">&quot;我是陈彩婷！&quot;</span>;</span><br><span class="line">		<span class="keyword">char</span>[] cs = data.toCharArray();</span><br><span class="line">		fw.write(cs);</span><br><span class="line">		fw.close();</span><br><span class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="6、集合框架"><a href="#6、集合框架" class="headerlink" title="6、集合框架"></a>6、集合框架</h1><h2 id="6-1-arraylist"><a href="#6-1-arraylist" class="headerlink" title="6.1 arraylist"></a>6.1 arraylist</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> arrayListLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListLearn</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">outputArray</span><span class="params">(List&lt;Hero&gt; heros)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 增强型for循环</span></span><br><span class="line">		<span class="comment">/*for (Object hero : heros) &#123;</span></span><br><span class="line"><span class="comment">			System.out.println(hero.toString());</span></span><br><span class="line"><span class="comment">		&#125;*/</span></span><br><span class="line">		<span class="comment">// 迭代器while循环</span></span><br><span class="line">		Iterator&lt;Hero&gt; it = heros.iterator();</span><br><span class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">			Hero hero = it.next();</span><br><span class="line">			System.out.println(hero.toString());</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;******************************&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@SuppressWarnings(&quot;rawtypes&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		ArrayList&lt;Hero&gt; heros = <span class="keyword">new</span> ArrayList&lt;Hero&gt;();</span><br><span class="line">		heros.add(<span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>, <span class="number">1000</span>, <span class="string">&quot;hero&quot;</span>));</span><br><span class="line">		heros.add(<span class="keyword">new</span> Hero());</span><br><span class="line">		<span class="comment">// 在特定的位置上添加</span></span><br><span class="line">		Hero spHero = <span class="keyword">new</span> Hero(<span class="string">&quot;sphero&quot;</span>, <span class="number">100</span>, <span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		heros.add(<span class="number">1</span>, spHero);</span><br><span class="line">		<span class="comment">// 数组大小</span></span><br><span class="line">		System.out.println(heros.size());</span><br><span class="line">		<span class="comment">// 遍历</span></span><br><span class="line">		<span class="comment">// 调用重写的toString方法</span></span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(heros);</span><br><span class="line">		<span class="comment">// 获取指定位置的对象</span></span><br><span class="line">		System.out.println(heros.get(<span class="number">0</span>));</span><br><span class="line">		<span class="comment">// 判断对象是否存在</span></span><br><span class="line">		System.out.println(heros.contains(spHero));</span><br><span class="line">		<span class="comment">// 获取对象所处的位置</span></span><br><span class="line">		System.out.println(heros.indexOf(spHero));</span><br><span class="line">		System.out.println(heros.lastIndexOf(spHero));</span><br><span class="line">		<span class="comment">// 按下标删除对象</span></span><br><span class="line">		heros.remove(heros.size() - <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(heros);</span><br><span class="line">		<span class="comment">// 按下标替换对象</span></span><br><span class="line">		Hero spHero2 = <span class="keyword">new</span> Hero(<span class="string">&quot;sphero2&quot;</span>, <span class="number">100</span>, <span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		heros.set(<span class="number">1</span>, spHero2);</span><br><span class="line">		<span class="comment">// heros.set(2, spHero2); 越界</span></span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(heros);</span><br><span class="line">		<span class="comment">// 按对象删除</span></span><br><span class="line">		heros.remove(spHero2);</span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(heros);</span><br><span class="line">		<span class="comment">// 转换为数组</span></span><br><span class="line">		Hero hs[] = (Hero[])heros.toArray(<span class="keyword">new</span> Hero[] &#123;&#125;);</span><br><span class="line">		System.out.println(hs);</span><br><span class="line">		<span class="comment">// 初始化5个对象</span></span><br><span class="line">		ArrayList&lt;Hero&gt; anotherHeros = <span class="keyword">new</span> ArrayList&lt;Hero&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        	anotherHeros.add(<span class="keyword">new</span> Hero(<span class="string">&quot;hero &quot;</span> + i, <span class="number">10</span>,<span class="string">&quot;hero&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 容器相加</span></span><br><span class="line">        heros.addAll(anotherHeros);</span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(heros);</span><br><span class="line">		<span class="comment">// 容器清空</span></span><br><span class="line">		anotherHeros.clear();</span><br><span class="line">		<span class="keyword">new</span> ArrayListLearn().outputArray(anotherHeros);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-2-linkedlist"><a href="#6-2-linkedlist" class="headerlink" title="6.2 linkedlist"></a>6.2 linkedlist</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> linkListLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"><span class="keyword">import</span> arrayListLearn.ArrayListLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListLearn</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 双向链表</span></span><br><span class="line">		<span class="comment">// 实现了List Deque </span></span><br><span class="line">		LinkedList&lt;Hero&gt; l1 = <span class="keyword">new</span> LinkedList&lt;Hero&gt;();</span><br><span class="line">		<span class="comment">// 在后面插入新的英雄</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">			l1.addLast(<span class="keyword">new</span> Hero(<span class="string">&quot;hero &quot;</span> + i, <span class="number">10</span>, <span class="string">&quot;hero&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 在前面插入新的英雄</span></span><br><span class="line">		l1.addFirst(<span class="keyword">new</span> Hero(<span class="string">&quot;hero 00&quot;</span>, <span class="number">10</span>, <span class="string">&quot;hero&quot;</span>));</span><br><span class="line">		<span class="comment">// 调用别包的方法 需要是public</span></span><br><span class="line">		<span class="comment">// 默认是package，只有包内可用</span></span><br><span class="line">		ArrayListLearn al = <span class="keyword">new</span> ArrayListLearn();</span><br><span class="line">		al.outputArray(l1);</span><br><span class="line">		<span class="comment">// 查看与删除</span></span><br><span class="line">		<span class="comment">// getFirst() removeFirst()</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 实现Queue接口</span></span><br><span class="line">		Queue&lt;Hero&gt; q1 = l1; <span class="comment">// 大的包容小的</span></span><br><span class="line">		<span class="comment">// 从队尾入</span></span><br><span class="line">		q1.offer(<span class="keyword">new</span> Hero(<span class="string">&quot;hero tail&quot;</span>, <span class="number">10</span>, <span class="string">&quot;hero&quot;</span>));</span><br><span class="line">		<span class="comment">// 查看队头</span></span><br><span class="line">		System.out.println(q1.peek());</span><br><span class="line">		<span class="comment">// 从队头出</span></span><br><span class="line">		Hero h = q1.poll();</span><br><span class="line">		System.out.println(h);</span><br><span class="line">		LinkedList&lt;Hero&gt; l2 = <span class="keyword">new</span> LinkedList&lt;Hero&gt;();</span><br><span class="line">		l2 = (LinkedList&lt;Hero&gt;)q1; <span class="comment">// 从大到小 强制转换</span></span><br><span class="line">		al.outputArray(l2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-3-hashset"><a href="#6-3-hashset" class="headerlink" title="6.3 hashset"></a>6.3 hashset</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hashLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetLearn</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">queryList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		List&lt;Integer&gt; myList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2000000</span>; i++) &#123;</span><br><span class="line">			myList.add(i + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 进行10次查找</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">			<span class="comment">// 打乱数组</span></span><br><span class="line">			Collections.shuffle(myList);</span><br><span class="line">			<span class="comment">// 获取当前时间</span></span><br><span class="line">			<span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">			<span class="keyword">for</span> (Integer num : myList) &#123;</span><br><span class="line">				<span class="keyword">if</span> (num == <span class="number">100000</span>) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;find 100000!&quot;</span>);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 获取结束时间</span></span><br><span class="line">			<span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">			System.out.printf(<span class="string">&quot;花了%d毫秒\n&quot;</span>,end-start);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">queryHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		HashMap&lt;Integer, Integer&gt; myMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2000000</span>; i++) &#123;</span><br><span class="line">			myMap.put(i + <span class="number">1</span>, i + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">			<span class="comment">// 获取当前时间</span></span><br><span class="line">			<span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">			<span class="keyword">int</span> target = myMap.get(<span class="number">100000</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;find &quot;</span>+ target);</span><br><span class="line">			<span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">			System.out.printf(<span class="string">&quot;花了%d毫秒\n&quot;</span>,end-start);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		HashSet&lt;String&gt; hs = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">		<span class="comment">// 生成随机数</span></span><br><span class="line">		Random random = <span class="keyword">new</span> Random();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">			hs.add(<span class="string">&quot;aa&quot;</span>+random.nextInt(<span class="number">6</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 发生插入则返回true</span></span><br><span class="line">		<span class="comment">// 反之返回false</span></span><br><span class="line">		System.out.println(hs.add(<span class="string">&quot;aa5&quot;</span>));</span><br><span class="line">		System.out.println(hs);</span><br><span class="line">		System.out.println(hs.size());</span><br><span class="line">		</span><br><span class="line">		HashSetLearn hsl = <span class="keyword">new</span> HashSetLearn();</span><br><span class="line">		<span class="comment">// hsl.queryList();</span></span><br><span class="line">		<span class="comment">// hsl.queryHashMap();</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 存储类型的hashset</span></span><br><span class="line">		HashSet&lt;Hero&gt; hs2 = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">			hs2.add(<span class="keyword">new</span> Hero(<span class="string">&quot;hero &quot;</span> + i, <span class="number">10</span>, <span class="string">&quot;hero&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 发生插入则返回true</span></span><br><span class="line">		<span class="comment">// 反之返回false</span></span><br><span class="line">		Hero ahero = <span class="keyword">new</span> Hero(<span class="string">&quot;hero 0&quot;</span>, <span class="number">10</span>, <span class="string">&quot;hero&quot;</span>);</span><br><span class="line">		System.out.println(hs2.add(ahero)); <span class="comment">// true</span></span><br><span class="line">		<span class="comment">// equals判断为true 所以不能进行进一步添加</span></span><br><span class="line">		System.out.println(hs2.add(ahero)); <span class="comment">// false</span></span><br><span class="line">		System.out.println(hs2);</span><br><span class="line">		System.out.println(hs2.size());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7、匿名类"><a href="#7、匿名类" class="headerlink" title="7、匿名类"></a>7、匿名类</h1><h2 id="接口方法"><a href="#接口方法" class="headerlink" title="接口方法"></a>接口方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdaLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HeroChecker</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Hero h)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="主函数-1"><a href="#主函数-1" class="headerlink" title="主函数"></a>主函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdaLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"><span class="keyword">import</span> arrayListLearn.ArrayListLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaLearn</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Hero h_cct = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>,<span class="number">1000</span>,<span class="number">50</span>);</span><br><span class="line">		List&lt;Hero&gt; hero_list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		Random random = <span class="keyword">new</span> Random();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">			hero_list.add(<span class="keyword">new</span> Hero(<span class="string">&quot;hero&quot;</span> + (i + <span class="number">1</span>), random.nextInt(<span class="number">1000</span>), random.nextInt(<span class="number">50</span>)));</span><br><span class="line">		&#125;</span><br><span class="line">		hero_list.add(h_cct);</span><br><span class="line">		ArrayListLearn al = <span class="keyword">new</span> ArrayListLearn();</span><br><span class="line">		al.outputArray(hero_list);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 排序</span></span><br><span class="line">		System.out.println(<span class="string">&quot;排序后：&quot;</span>);</span><br><span class="line">		Collections.sort(hero_list);</span><br><span class="line">		al.outputArray(hero_list);</span><br><span class="line">		<span class="comment">// 1. 显示实现test接口方法</span></span><br><span class="line">		<span class="comment">// 筛选 传入匿名类对象</span></span><br><span class="line">		System.out.println(<span class="string">&quot;筛选damage&gt;=30的后：&quot;</span>);</span><br><span class="line">		HeroChecker checker = <span class="keyword">new</span> HeroChecker() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Hero h)</span> </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> (h.damage &lt; <span class="number">30</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">// filter方法只有是static，才能直接调用</span></span><br><span class="line">		List&lt;Hero&gt; new_hero_list1 = filter(hero_list, checker);</span><br><span class="line">		al.outputArray(new_hero_list1);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// 2.1 匿名类：精简接口方法 </span></span><br><span class="line">		<span class="comment">// 筛选 传入Lambda</span></span><br><span class="line">		<span class="comment">// Lambda类实际上就是一个参数-&gt;判断bool函数</span></span><br><span class="line">		System.out.println(<span class="string">&quot;筛选hp&gt;=800的后：&quot;</span>);</span><br><span class="line">		List&lt;Hero&gt; new_hero_list2 = filter(hero_list, (h)-&gt;h.hp &lt; <span class="number">800</span>);</span><br><span class="line">		al.outputArray(new_hero_list2);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// 2.2 </span></span><br><span class="line">		<span class="comment">// Lambda排序方式</span></span><br><span class="line">        <span class="comment">// sort是一个筛选函数 当实现的接口方法返回1时 发生位置调换 即小的h1换到大的h2后面 所以是从大到小</span></span><br><span class="line">		System.out.println(<span class="string">&quot;对hp进行从大到小的排序后：&quot;</span>);</span><br><span class="line">		Collections.sort(new_hero_list2, (h1, h2)-&gt;h1.hp &lt; h2.hp ? <span class="number">1</span>:-<span class="number">1</span>); <span class="comment">// 1：后面的排在前面 ；-1：后面的还是在后面</span></span><br><span class="line">		al.outputArray(new_hero_list2);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// 3. </span></span><br><span class="line">		<span class="comment">// Lambda调用静态方法</span></span><br><span class="line">		<span class="comment">// List&lt;Hero&gt; new_hero_list3 = filter(hero_list, h-&gt;testHero(h));</span></span><br><span class="line">		List&lt;Hero&gt; new_hero_list3 = filter(hero_list, LambdaLearn::testHero);</span><br><span class="line">		al.outputArray(new_hero_list3);</span><br><span class="line">		<span class="comment">// 还可以引用对象方法，容器中对象的方法</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 聚合操作</span></span><br><span class="line">		System.out.println(<span class="string">&quot;聚合操作：&quot;</span>);</span><br><span class="line">		Hero thirdhero = hero_list</span><br><span class="line">				.stream() <span class="comment">// Collection切换为管道源</span></span><br><span class="line">				.sorted((h1, h2) -&gt; h1.hp &lt; h2.hp?<span class="number">1</span>:-<span class="number">1</span>) <span class="comment">// 中间操作：按照hp从高到低排序</span></span><br><span class="line">				.skip(<span class="number">2</span>) <span class="comment">// 中间操作：跳过前2个</span></span><br><span class="line">				.findFirst() <span class="comment">// 结束</span></span><br><span class="line">				.get();</span><br><span class="line">		System.out.println(thirdhero);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span>  List&lt;Hero&gt; <span class="title">filter</span><span class="params">(List&lt;Hero&gt; heros, HeroChecker hc)</span> </span>&#123;</span><br><span class="line">		List&lt;Hero&gt; new_heros = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">for</span> (Hero h : heros) &#123;</span><br><span class="line">			<span class="keyword">if</span> (!hc.test(h)) &#123; <span class="comment">// 筛选器 当返回true时 选上</span></span><br><span class="line">				new_heros.add(h);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> new_heros;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">testHero</span><span class="params">(Hero h)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> h.hp &lt; <span class="number">800</span> &amp;&amp; h.damage &lt; <span class="number">30</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="8、多线程"><a href="#8、多线程" class="headerlink" title="8、多线程"></a>8、多线程</h1><h2 id="8-1-线程的一些基本操作"><a href="#8-1-线程的一些基本操作" class="headerlink" title="8.1 线程的一些基本操作"></a>8.1 线程的一些基本操作</h2><p>实现线程的3种方式：</p>
<ol>
<li>继承Thread<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KillThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Hero h1;</span><br><span class="line">	<span class="keyword">private</span> Hero h2;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">KillThread</span><span class="params">(Hero h1, Hero h2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.h1 = h1;</span><br><span class="line">		<span class="keyword">this</span>.h2 = h2;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">while</span> (!h2.isDead()) &#123;</span><br><span class="line">			h1.attackHero(h2);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Battle类实现runnable接口：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Battle</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	Hero h1;</span><br><span class="line">	Hero h2;</span><br><span class="line">	Battle(Hero h1, Hero h2) &#123;</span><br><span class="line">		<span class="keyword">this</span>.h1 = h1;</span><br><span class="line">		<span class="keyword">this</span>.h2 = h2;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">while</span> (!h2.isDead()) &#123;</span><br><span class="line">			h1.attackHero(h2);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>匿名类<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 多线程例子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultipleThread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Hero h1 = <span class="keyword">new</span> Hero(<span class="string">&quot;A&quot;</span>, <span class="number">2500</span>, <span class="number">5</span>);</span><br><span class="line">		Hero h2 = <span class="keyword">new</span> Hero(<span class="string">&quot;B&quot;</span>, <span class="number">2000</span>, <span class="number">8</span>);</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 顺序</span></span><br><span class="line"><span class="comment">		while (!h2.isDead()) &#123;</span></span><br><span class="line"><span class="comment">			h1.attackHero(h2);</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		while (!h1.isDead()) &#123;</span></span><br><span class="line"><span class="comment">			h2.attackHero(h1);</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="comment">// 多线程</span></span><br><span class="line">		<span class="comment">// 继承Thread</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		KillThread kt1 = new KillThread(h1, h2);</span></span><br><span class="line"><span class="comment">		kt1.start(); // 借助一个线程对象的start方法，才会启动一个线程</span></span><br><span class="line"><span class="comment">		KillThread kt2 = new KillThread(h2, h1);</span></span><br><span class="line"><span class="comment">		kt2.start();</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="comment">//或实现Runnable接口 </span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		Battle b1 = new Battle(h1, h2);</span></span><br><span class="line"><span class="comment">		Battle b2 = new Battle(h2, h1);</span></span><br><span class="line"><span class="comment">		new Thread(b2).start();</span></span><br><span class="line"><span class="comment">		new Thread(b1).start();</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="comment">// 或匿名类</span></span><br><span class="line">		<span class="comment">// A攻击B</span></span><br><span class="line">		Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="comment">// 可直接使用外部final变量</span></span><br><span class="line">				<span class="comment">// JDK7之后无要求</span></span><br><span class="line">				<span class="keyword">while</span> (!h2.isDead()) &#123;</span><br><span class="line">					h1.attackHero(h2);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">// B攻击A</span></span><br><span class="line">		Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">while</span> (!h1.isDead()) &#123;</span><br><span class="line">					Thread.yield(); <span class="comment">// 临时暂停</span></span><br><span class="line">					h2.attackHero(h1);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t1.setPriority(<span class="number">1</span>);</span><br><span class="line">		t2.setPriority(<span class="number">10</span>); <span class="comment">// 优先级大的抢占CPU能力强</span></span><br><span class="line">		t1.start();</span><br><span class="line">		t2.start();</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		try &#123;</span></span><br><span class="line"><span class="comment">			t1.join(); // 加入到主线程中</span></span><br><span class="line"><span class="comment">			t2.join();</span></span><br><span class="line"><span class="comment">		&#125; catch(InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">			e.printStackTrace();</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		System.out.println(<span class="string">&quot;Game Over!!!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-2-原子操作"><a href="#8-2-原子操作" class="headerlink" title="8.2 原子操作"></a>8.2 原子操作</h2>普通int不能做到并发操作，而AtomicInteger可以<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> AtomicInteger aint = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">int</span> number = <span class="number">100000</span>;</span><br><span class="line">		Thread[] t1 = <span class="keyword">new</span> Thread[number];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; number; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					value++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t.start();</span><br><span class="line">			t1[i] = t;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (Thread t: t1) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				t.join();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;value:&quot;</span> + value);</span><br><span class="line">		Thread t2[] = <span class="keyword">new</span> Thread[number];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; number; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					aint.incrementAndGet(); <span class="comment">// 原子操作:自增</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t.start();</span><br><span class="line">			t2[i] = t;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (Thread t:t2) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				t.join();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;aint:&quot;</span> + aint.intValue());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-3-synchronized"><a href="#8-3-synchronized" class="headerlink" title="8.3 synchronized"></a>8.3 synchronized</h2>Hero类的recover方法与hurt方法有synchronized关键词修饰：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 进程同步</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">final</span> Hero h = <span class="keyword">new</span> Hero(<span class="string">&quot;cct&quot;</span>, <span class="number">1000</span>, <span class="number">50</span>);</span><br><span class="line">		System.out.printf(<span class="string">&quot;初始血量为%d\n&quot;</span>, h.hp);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// n个线程</span></span><br><span class="line">		<span class="keyword">int</span> n = <span class="number">10000</span>;</span><br><span class="line">		Thread[] addThreads = <span class="keyword">new</span> Thread[n];</span><br><span class="line">		Thread[] reduceThreads = <span class="keyword">new</span> Thread[n];</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 匿名类建立n个线程增加hp</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123; </span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					h.recover();</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">100</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t.start();</span><br><span class="line">			addThreads[i] = t;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 匿名类建立n个线程减少hp</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123; </span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					h.hurt();</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">100</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			t.start();</span><br><span class="line">			reduceThreads[i] = t;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 等待所有增加线程结束</span></span><br><span class="line">		<span class="keyword">for</span> (Thread t : addThreads) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				t.join();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 等待所有减少线程结束</span></span><br><span class="line">		<span class="keyword">for</span> (Thread t : reduceThreads) &#123;</span><br><span class="line">			t.join();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.print(h.hp); <span class="comment">// 初始血量1000</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-4-await-signal-signalAll"><a href="#8-4-await-signal-signalAll" class="headerlink" title="8.4 await signal signalAll"></a>8.4 await signal signalAll</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockTest</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 获取当前时间</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">now</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;HH:mm:ss&quot;</span>).format(<span class="keyword">new</span> Date());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 打印日志</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		System.out.printf(<span class="string">&quot;%s %s %s%n&quot;</span>, now(), Thread.currentThread().getName(), msg);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">		Condition condition = lock.newCondition();<span class="comment">// await signal signalAll方法</span></span><br><span class="line">		</span><br><span class="line">		Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">boolean</span> locked = <span class="keyword">false</span>;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					log(<span class="string">&quot;线程启动&quot;</span>);</span><br><span class="line">					log(<span class="string">&quot;试图lock&quot;</span>);</span><br><span class="line">					lock.lock();</span><br><span class="line">					log(<span class="string">&quot;已占有(5s)&quot;</span>);</span><br><span class="line">					Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">					log(<span class="string">&quot;临时释放lock对象，并等待&quot;</span>);</span><br><span class="line">					condition.await(); <span class="comment">// 自身陷入等待</span></span><br><span class="line">					log(<span class="string">&quot;重新占有lock,继续5s&quot;</span>);</span><br><span class="line">					Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">					log(<span class="string">&quot;释放对象unlock&quot;</span>);</span><br><span class="line">					lock.unlock();</span><br><span class="line">				&#125;</span><br><span class="line">				log(<span class="string">&quot;线程结束&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t1.setName(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">		t1.start();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">boolean</span> locked = <span class="keyword">true</span>;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					log(<span class="string">&quot;线程启动&quot;</span>);</span><br><span class="line">					log(<span class="string">&quot;试图lock&quot;</span>);</span><br><span class="line">					<span class="comment">// lock.lock();</span></span><br><span class="line">					locked = lock.tryLock(<span class="number">6</span>, TimeUnit.SECONDS); <span class="comment">// 试图占有操作，时限1s</span></span><br><span class="line">					<span class="keyword">if</span> (locked) &#123;</span><br><span class="line">						log(<span class="string">&quot;已占有(5s)&quot;</span>);</span><br><span class="line">						Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">						log(<span class="string">&quot;唤醒&quot;</span>);</span><br><span class="line">						condition.signal();</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						log(<span class="string">&quot;1s内没能成功占有 Sorry&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">					<span class="keyword">if</span> (locked) &#123; <span class="comment">// 在占有对象的前提下</span></span><br><span class="line">						log(<span class="string">&quot;释放对象unlock&quot;</span>);</span><br><span class="line"><span class="comment">//						lock.unlock();</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				log(<span class="string">&quot;线程结束&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t2.setName(<span class="string">&quot;t2&quot;</span>);</span><br><span class="line">		t2.start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-5-死锁实例"><a href="#8-5-死锁实例" class="headerlink" title="8.5 死锁实例"></a>8.5 死锁实例</h2>hero实例对象使用synchronized修饰<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DuoTai.Hero;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">final</span> Hero h1 = <span class="keyword">new</span> Hero(<span class="string">&quot;hero1&quot;</span>, <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">		<span class="keyword">final</span> Hero h2 = <span class="keyword">new</span> Hero(<span class="string">&quot;hero2&quot;</span>, <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">		<span class="keyword">final</span> Hero h3 = <span class="keyword">new</span> Hero(<span class="string">&quot;hero3&quot;</span>, <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">		</span><br><span class="line">		Thread t1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">synchronized</span> (h1) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;t1占有h1！&quot;</span>);</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">100</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(<span class="string">&quot;t1想去占有h2&quot;</span>);</span><br><span class="line">					<span class="keyword">synchronized</span> (h2) &#123;</span><br><span class="line">						System.out.println(<span class="string">&quot;nothing&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t1.start();</span><br><span class="line">		Thread t2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">synchronized</span> (h2) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;t2占有h2！&quot;</span>);</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(<span class="string">&quot;t2想去占有h3&quot;</span>);</span><br><span class="line">					<span class="keyword">synchronized</span> (h3) &#123;</span><br><span class="line">						System.out.println(<span class="string">&quot;nothing&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t2.start();</span><br><span class="line">		Thread t3 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="keyword">synchronized</span> (h3) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;t3占有h3！&quot;</span>);</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(<span class="string">&quot;t3想去占有h1&quot;</span>);</span><br><span class="line">					<span class="keyword">synchronized</span> (h1) &#123;</span><br><span class="line">						System.out.println(<span class="string">&quot;nothing&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		t3.start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-6-生产者与消费者"><a href="#8-6-生产者与消费者" class="headerlink" title="8.6 生产者与消费者"></a>8.6 生产者与消费者</h2>两种方式<h3 id="synchronized与信号量方式"><a href="#synchronized与信号量方式" class="headerlink" title="synchronized与信号量方式"></a>synchronized与信号量方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 生产者-消费者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Stack&lt;E&gt; ms = <span class="keyword">new</span> Stack&lt;E&gt;();</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> limit = <span class="number">10</span>; <span class="comment">// 栈的大小</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyStack</span><span class="params">(<span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = l;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在栈满的情况下 使当前进程wait</span></span><br><span class="line">	<span class="comment">// 将item压入栈</span></span><br><span class="line">	<span class="comment">// 通知消费者wait进程可拿</span></span><br><span class="line">	<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(E item)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">while</span> (ms.size() == limit) <span class="keyword">this</span>.wait(); <span class="comment">// 使用while再次确认 防止虚假唤醒 </span></span><br><span class="line">		ms.push(item);</span><br><span class="line">		System.out.println(<span class="string">&quot;当前stack大小为&quot;</span>+ms.size());</span><br><span class="line">		notifyAll();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在栈空的情况下 使当前进程wait</span></span><br><span class="line">	<span class="comment">// 将item取出栈</span></span><br><span class="line">	<span class="comment">// 通知生产者wait进程可放</span></span><br><span class="line">	<span class="function"><span class="keyword">synchronized</span> E <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">while</span> (ms.size() == <span class="number">0</span>) <span class="keyword">this</span>.wait();</span><br><span class="line">		E item = ms.pop();</span><br><span class="line">		System.out.println(<span class="string">&quot;当前stack大小为&quot;</span>+ms.size());</span><br><span class="line">		notifyAll();</span><br><span class="line">		<span class="keyword">return</span> item;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PCproblem</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyStack&lt;Integer&gt; ms = <span class="keyword">new</span> MyStack(<span class="number">10</span>); <span class="comment">// 临界区</span></span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Thread producer = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				Random r = <span class="keyword">new</span> Random();</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">						<span class="keyword">int</span> x = r.nextInt(<span class="number">10</span>);</span><br><span class="line">						ms.push(x);</span><br><span class="line">						System.out.println(<span class="string">&quot;压入&quot;</span>+ x);</span><br><span class="line">						Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		producer.start();</span><br><span class="line">		</span><br><span class="line">		Thread[] consumer = <span class="keyword">new</span> Thread[<span class="number">3</span>];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">							<span class="keyword">int</span> x = ms.pop();</span><br><span class="line">							System.out.println(<span class="string">&quot;弹出&quot;</span>+ x);</span><br><span class="line">							Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			consumer[i] = t;</span><br><span class="line">			t.start();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="lock法"><a href="#lock法" class="headerlink" title="lock法"></a>lock法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 生产者-消费者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNewStack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Stack&lt;E&gt; ms = <span class="keyword">new</span> Stack&lt;E&gt;();</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> limit = <span class="number">10</span>; <span class="comment">// 栈的大小</span></span><br><span class="line">	Lock lock = <span class="keyword">new</span> ReentrantLock(); <span class="comment">// 创建锁对象</span></span><br><span class="line">	Condition condition = lock.newCondition();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 获取当前时间</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">now</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;HH:mm:ss&quot;</span>).format(<span class="keyword">new</span> Date());		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 打印日志</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">		System.out.printf(<span class="string">&quot;%s %s %s%n&quot;</span>, now(), Thread.currentThread().getName(), msg);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyNewStack</span><span class="params">(<span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.limit = l;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在栈满的情况下 使当前进程wait 释放锁</span></span><br><span class="line">	<span class="comment">// 不能使用synchronized关键字，因为使用后确保对stack的互斥访问 尽管await了，还是上着锁</span></span><br><span class="line">	<span class="comment">// 当栈不满后，将item压入栈</span></span><br><span class="line">	<span class="comment">// 通知消费者wait进程可拿</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(E item)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			lock.lock();</span><br><span class="line">			<span class="keyword">while</span> (ms.size() == limit) &#123;</span><br><span class="line">				log(<span class="string">&quot;栈满了，生产者等待&quot;</span>);</span><br><span class="line">				condition.await(); <span class="comment">// 使用while再次确认 防止虚假唤醒 </span></span><br><span class="line">			&#125;</span><br><span class="line">			ms.push(item);</span><br><span class="line">			log(<span class="string">&quot;生产者压入&quot;</span>+ item);</span><br><span class="line">			condition.signal(); <span class="comment">// 通知消费者</span></span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			lock.unlock();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在栈空的情况下 使当前进程wait</span></span><br><span class="line">	<span class="comment">// 将item取出栈</span></span><br><span class="line">	<span class="comment">// 通知生产者wait进程可放</span></span><br><span class="line">	<span class="function">E <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			lock.lock();</span><br><span class="line">			<span class="keyword">while</span> (ms.size() == <span class="number">0</span>) &#123;</span><br><span class="line">				log(<span class="string">&quot;栈为空，消费者等待&quot;</span>);</span><br><span class="line">				condition.await();</span><br><span class="line">			&#125;</span><br><span class="line">			E item = ms.pop();</span><br><span class="line">			log(<span class="string">&quot;消费者弹出&quot;</span>+item);</span><br><span class="line">			condition.signal();</span><br><span class="line">			<span class="keyword">return</span> item;</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			lock.unlock(); <span class="comment">// 解锁</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PCproblem2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyNewStack&lt;Integer&gt; ms = <span class="keyword">new</span> MyNewStack(<span class="number">10</span>); <span class="comment">// 临界区</span></span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">// 1个生产者线程</span></span><br><span class="line">		Thread producer = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				ms.log(<span class="string">&quot;启动&quot;</span>);</span><br><span class="line">				Random r = <span class="keyword">new</span> Random();</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">						<span class="keyword">int</span> x = r.nextInt(<span class="number">10</span>);</span><br><span class="line">						ms.push(x);</span><br><span class="line">						Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		producer.setName(<span class="string">&quot;producer&quot;</span>);</span><br><span class="line">		producer.start();</span><br><span class="line">		<span class="comment">// 3个消费者线程</span></span><br><span class="line">		Thread[] consumer = <span class="keyword">new</span> Thread[<span class="number">3</span>];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">			Thread t = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					ms.log(<span class="string">&quot;启动&quot;</span>);</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">							<span class="keyword">int</span> x = ms.pop();</span><br><span class="line">							ms.log(<span class="string">&quot;thousand years later...&quot;</span>);</span><br><span class="line">							Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;;</span><br><span class="line">			consumer[i] = t;</span><br><span class="line">			t.setName(<span class="string">&quot;consumer&quot;</span> + (i + <span class="number">1</span>));</span><br><span class="line">			t.start();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-7-线程池"><a href="#8-7-线程池" class="headerlink" title="8.7 线程池"></a>8.7 线程池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> multipleThread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.LinkedBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThreadPool</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> poolSize;</span><br><span class="line">	<span class="comment">// 任务容器</span></span><br><span class="line">	LinkedList&lt;Runnable&gt; tasks = <span class="keyword">new</span> LinkedList&lt;Runnable&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 10个消费者进程</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		poolSize = <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">			<span class="keyword">new</span> ConsumeThread(<span class="string">&quot;线程&quot;</span>+i).start();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 加入到任务容器中</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Runnable r)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">synchronized</span> (tasks) &#123;</span><br><span class="line">			tasks.add(r);</span><br><span class="line">			<span class="comment">// 通知wait的消费者进程</span></span><br><span class="line">			tasks.notifyAll();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 子类</span></span><br><span class="line">	<span class="comment">// 消费者线程</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">ConsumeThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">ConsumeThread</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">super</span>(name);</span><br><span class="line">		&#125;</span><br><span class="line">		Runnable task;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;启动：&quot;</span> + <span class="keyword">this</span>.getName());</span><br><span class="line">			<span class="keyword">while</span> (<span class="keyword">true</span>) &#123; <span class="comment">// 启动后一直保持运行状态</span></span><br><span class="line">				<span class="keyword">synchronized</span> (tasks) &#123; <span class="comment">// 对tasks同步访问</span></span><br><span class="line">					<span class="comment">// 任务容器为空 wait</span></span><br><span class="line">					<span class="keyword">while</span> (tasks.isEmpty()) &#123;</span><br><span class="line">						<span class="keyword">try</span> &#123;</span><br><span class="line">							tasks.wait();</span><br><span class="line">						&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">							<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">// 从任务容器中取出任务</span></span><br><span class="line">					task = tasks.removeLast();</span><br><span class="line">					<span class="comment">// 通知生产任务线程继续生产</span></span><br><span class="line">					tasks.notifyAll();</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="keyword">this</span>.getName()+<span class="string">&quot;获取到任务，并执行&quot;</span>);</span><br><span class="line">				task.run();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadPool</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">selfThreadPoolMethods</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 线程数</span></span><br><span class="line">		<span class="comment">// 最大线程数</span></span><br><span class="line">		<span class="comment">// 多余线程被回收的空余时间</span></span><br><span class="line">		ThreadPoolExecutor tpe = <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">10</span>,<span class="number">15</span>,<span class="number">60</span>,TimeUnit.SECONDS,<span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">			tpe.execute(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line"></span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">					System.out.println(<span class="string">&quot;do something!&quot;</span>);</span><br><span class="line">					<span class="keyword">try</span> &#123; <span class="comment">// 拉长任务执行时间</span></span><br><span class="line">						Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">					&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">						<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">new</span> ThreadPool().selfThreadPoolMethods();</span><br><span class="line">		System.out.println(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		MyThreadPool mtp = new MyThreadPool();</span></span><br><span class="line"><span class="comment">		int slptime = 1000;</span></span><br><span class="line"><span class="comment">		// 加入任务</span></span><br><span class="line"><span class="comment">		for (int i = 0; i &lt; 100; i++) &#123;</span></span><br><span class="line"><span class="comment">			Runnable r = new Runnable() &#123;</span></span><br><span class="line"><span class="comment">				public void run() &#123;</span></span><br><span class="line"><span class="comment">					System.out.println(&quot;do something!&quot;);</span></span><br><span class="line"><span class="comment">					try &#123; // 拉长任务执行时间</span></span><br><span class="line"><span class="comment">						Thread.sleep(1000);</span></span><br><span class="line"><span class="comment">					&#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">						// TODO Auto-generated catch block</span></span><br><span class="line"><span class="comment">						e.printStackTrace();</span></span><br><span class="line"><span class="comment">					&#125;</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">			&#125;;</span></span><br><span class="line"><span class="comment">			mtp.add(r);</span></span><br><span class="line"><span class="comment">			try &#123;</span></span><br><span class="line"><span class="comment">				slptime = slptime &gt; 100 ? slptime - 100 : slptime;</span></span><br><span class="line"><span class="comment">				Thread.sleep(slptime); // 缩短任务加入间隔</span></span><br><span class="line"><span class="comment">			&#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">				// TODO Auto-generated catch block</span></span><br><span class="line"><span class="comment">				e.printStackTrace();</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/19/java%E5%9F%BA%E7%A1%80/" data-id="ckxpsvc430014dowb8smk2xpr" class="article-share-link">
        分享
      </a>
      
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>

    </footer>

  </div>

  
  
<nav class="article-nav">
  
  <a href="/2021/12/28/Python/python%E8%B0%83%E7%94%A8c%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81/" class="article-nav-link">
    <strong class="article-nav-caption">前一篇</strong>
    <div class="article-nav-title">
      
      python调用c语言代码
      
    </div>
  </a>
  
  
  <a href="/2020/09/09/%E5%B0%8F%E7%82%B9/" class="article-nav-link">
    <strong class="article-nav-caption">后一篇</strong>
    <div class="article-nav-title">小点</div>
  </a>
  
</nav>

  

  
  
  
  

</article>
</section>
    <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
  <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
  <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>Cecyci &copy; 2021</li>
      
        <li>ZHWANGART</li>
      
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>theme  <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/hexo.svg" alt="Cecyci"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">首页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="fe fe-feed"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/copybtn.js"></script>





<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
  });
</script>



<script src="/js/ocean.js"></script>

</body>

</html>